---

import Layout from '../../layouts/Layout.astro';
import ChatMessage from '../../components/projects/wielomiany/ChatMessage.astro';
import UserMessage from '../../components/projects/wielomiany/UserMessage.astro';
---
<Layout>
	<main class="bg-[#212121]">
		<section class="flex items-center justify-center font-sans font-bold h-[92.5vh]">
			<h1 class="text-zinc-50 text-[10vw]">Wielomiany</h1>
		</section>
		<section class="snap-start">
			<UserMessage>
				<p>Piszesz notatke dla uczniów 2 klasy technikum z matematyki rozszerzonej. Temat to wielomiany. Napisz szybkie wprowadzenie do wielomianów.</p>
			</UserMessage>
			<ChatMessage>
				<h1 class="text-[#ECECEC] whitespace-pre-wrap font-bold sm:text-lg text-xl">Wprowadzenie do wielomianów</h1>
				<br>
				<h2 class="text-[#ECECEC] whitespace-pre-wrap font-semibold sm:text-base text-lg mt-8">Definicja wielomianu</h2>
				<br>
				<p>Wielomian to wyrażenie algebraiczne postaci:</p>
				<p class="text-sm" is:raw>$$W(x) = a_n x^n + a_{n-1} x^{n-1} + \ldots + a_1 x + a_0$$</p>
				<p>gdzie:</p>
				<ul>
					<li>\(n\) - stopień wielomianu (najwyższa potęga \(x\)),</li>
					<li is:raw>\(a_n, a_{n-1}, \ldots, a_1, a_0\) - współczynniki wielomianu (liczby rzeczywiste),</li>
					<li>\(a_n \neq 0\).</li>
				</ul>
				<h2 class="text-[#ECECEC] whitespace-pre-wrap font-semibold text-lg mt-6">Przykłady wielomianów</h2>
				<ol>
					<li>\(W(x) = 3x^4 + 2x^2 + 5x - 7\) (stopień 4)</li>
					<li>\(W(x) = x^3 - 2x^2 + 3x - 1\) (stopień 3)</li>
					<li>\(W(x) = 2x + 1\) (stopień 1 - funkcja liniowa to też wielomian!)</li>
				</ol>
				<h2 class="text-[#ECECEC] whitespace-pre-wrap font-semibold text-lg mt-6">Podstawowe własności wielomianów</h2>
				<ul>
					<li><strong class="font-medium">Suma i różnica wielomianów</strong> - dodajemy/odejmujemy współczynniki przy tych samych potęgach \(x\).</li>
					<li><strong class="font-medium">Mnożenie wielomianów</strong> - stosujemy rozdzielność mnożenia względem dodawania.</li>
					<li><strong class="font-medium">Dzielenie wielomianów</strong> - można stosować schemat Hornera lub klasyczne dzielenie pisemne.</li>
				</ul>
				<h2 class="text-[#ECECEC] whitespace-pre-wrap font-semibold text-lg mt-6">Pierwiastki wielomianu</h2>
				<p>Liczba \(x_0\) jest pierwiastkiem wielomianu \(W(x)\), jeśli:</p>
				<p is:raw>$$W(x_0) = 0$$</p>
				<p>Przykład: Jeśli \(W(x) = x^2 - 4\), to \(x = 2\) i \(x = -2\) są pierwiastkami tego wielomianu (bo \(W(2) = 0\) i \(W(-2) = 0\)).</p>
				<p class="text-base mt-6">To podstawowe pojęcia, które będą potrzebne do dalszej nauki o wielomianach!</p>	
			</ChatMessage>
			<UserMessage>
				<p>Czym jest schemat Hornera?</p>
			</UserMessage>
			<ChatMessage>
				<h1 class="text-[#ECECEC] whitespace-pre-wrap font-bold text-xl">Schemat Hornera</h1>
				<p class="text-base mt-6">Schemat Hornera to metoda umożliwiająca szybkie:</p>
				<ul>
					<li>obliczanie wartości wielomianu dla danego \(x_0\)</li>
					<li>Dzielenie wielomianu przez dwumian \((x-x_0)\)</li>
					<li>obliczanie pierwiastków wielomianu.</li>
				</ul>

				<hr class="border-[#555555] mb-16 mt-8">

				<h1 class="text-[#ECECEC] whitespace-pre-wrap font-bold text-xl">1. Obliczanie wartości</h1>
				<p class="text-base mt-4">Rozważmy wielomian:</p>
				<p is:raw>$$W(x) = 2x^3 - 3x^2 + 4x - 5$$</p>
				<p>Chcemy obliczyć \(W(2)\).</p>
				<h2 class="text-[#ECECEC] whitespace-pre-wrap font-semibold text-lg mt-6">Krok 1: Wypisz współczynniki</h2>
				<p>$$2, -3, 4, -5$$</p>
				<h2 class="text-[#ECECEC] whitespace-pre-wrap font-semibold text-lg mt-6">Krok 2: Wykonaj schemat Hornera</h2>
				<ol>
					<li>Przepisujemy pierwszy współczynnik.</li>
					<li>Mnożymy go przez \(x_0 = 2\) i dodajemy do następnego współczynnika.</li>
					<li>Powtarzamy ten proces aż do końca.</li>
				</ol>
				<p is:raw class="text-[#ECECEC] whitespace-pre-wrap">
					\[
					\begin{array}{r|rrrr}
					  2 & 2 & -3 & 4 & -5  \\ 
						&   & 4  & 2 & 12   \\ 
					  \hline
						& 2 & 1 & 6  & 7   \\
					\end{array}
					\]
				</p>
				<h2 class="text-[#ECECEC] whitespace-pre-wrap font-semibold text-lg">Odpowiedź: \(W(2) = 7\).</h2>

				<hr class="border-[#555555] mb-16 mt-8">

				<h1 class="text-[#ECECEC] whitespace-pre-wrap font-bold text-xl">2. Dzielenie wielomianu przez \((x-x_0)\)</h1>
				
				<p class=" text-base mt-4">Schemat Hornera pozwala również podzielić \(W(x)\) przez \((x-x+0)\).</p>

				<ul>
					<li>Wynik dzielenia to nowy wielomian (bez reszty, jeśli \(x_0\) jest pierwiastkiem).</li>
					<li>Reszta z dzielenia to ostatnia liczba w schemacie.</li>
				</ul>

				<p class=" text-base mt-4">Dla \(W(x)=2x^3-3x^3+4x-5\) i \((x-2)\), reszta to \(7\), więc \((x-2)\) nie jest czynnikiem \(W(x)\)</p>

				<p class=" text-base mt-8"><strong class="font-semibold">Nowy wielomian</strong> (bez reszty):</p>
				<p>$$2x^2+x+6$$</p>

				<hr class="border-[#555555] mb-16 mt-8">

				<h1 class="text-[#ECECEC] whitespace-pre-wrap font-bold text-xl">Kiedy stosować schemat Hornera?</h1>
				<ul>
					<li>Obliczanie wartości \(W(x)\) w jednym punkcie</li>
					<li>Dzielenie wielomianu przez \((x-x_0)\)</li>
					<li>Sprzwdzanie, czy \(x_0\) jest pierwiastkiem wielomianu</li>
				</ul>
				<p class=" text-base mt-4">Metoda jest szybka i eliminuje długie obliczenia ręczne!</p>
			</ChatMessage>
			<UserMessage>
				<p>Jest jakiś prostszy sposób na tą całą metodę Hornera?</p>
			</UserMessage>
			<ChatMessage>
				<h1 class="text-[#ECECEC] whitespace-pre-wrap font-bold text-xl mb-8">Spróbuj tego kalkulatora który dla ciebie przygotowałem!</h1>

				<div class="flex items-center justify-center flex-col">
					<div class="w-full">
						<label class="text-[#ECECEC] whitespace-pre-wrap text-sm">Wpisz współczynniki wielomianu (oddzielone przecinkami):</label>
						<input class="text-[#ECECEC] whitespace-pre-wrap bg-[#212121] w-32 text-sm" type="text" id="coefficients" placeholder="2,-3,4,-5">
					</div>
					<div class="w-full">
						<label class="text-[#ECECEC] whitespace-pre-wrap text-sm">Podaj dzielnik (x - c), c =</label>
						<input type="number" id="divisor" placeholder="2" class="grow w-32 bg-[#212121] text-sm">
					</div>
	
					<button onclick="calculateRuffini()" class="mt-8 relative flex h-10 w-20 right-[-0.625rem] items-center justify-center rounded-full transition-colors hover:opacity-70 focus-visible:outline-none focus-visible:outline-black disabled:text-[#f4f4f4] disabled:hover:opacity-100 dark:focus-visible:outline-white disabled:dark:bg-token-text-quaternary dark:disabled:text-token-main-surface-secondary bg-black text-white dark:bg-white dark:text-black disabled:bg-[#D7D7D7]">Oblicz</button>
	
					<div class="output text-[#ECECEC] whitespace-pre-wrap" id="result"></div>
				</div>
			</ChatMessage>
			<UserMessage>
				<p>Możesz mi dać jakieś zadanie z wykorzystaniem schematu Hornera?</p>
			</UserMessage>
			<ChatMessage>
				<h2 class="text-[#ECECEC] whitespace-pre-wrap font-semibold text-lg mb-6">Jasne! Spróbuj rozwiązać te zadania samodzielnie, a jeśli napotkasz trudności, skorzystaj z powyższego kalkulatora.</h2>
				<h1 class="text-[#ECECEC] whitespace-pre-wrap font-bold text-xl">Zadanie 1</h1>
				<p>Oblicz wartość wielomianu w punkcie \(x_0=3\):</p>
				<p is:raw>$$W(x)=2x^3-5x^2+3x+4$$</p>
			</ChatMessage>
			<UserMessage>
				<h2 class="text-[#ECECEC] whitespace-pre-wrap font-semibold text-lg mb-2">Zadanie 1</h2>
				<div class="flex flex-row items-center">
					<p>\(W(3) = \) </p>
					<input class="bg-[#303030] text-[#ECECEC] outline-none w-32" id="secondQuestionInput" type="text" placeholder="odpowiedź"/>
					<button onclick="checkAnswer('secondQuestionInput', '22', 'secondQuestionOutput');" type="button" class="relative flex h-8 w-8 right-[-0.625rem] items-center justify-center rounded-full transition-colors hover:opacity-70 focus-visible:outline-none focus-visible:outline-black disabled:text-[#f4f4f4] disabled:hover:opacity-100 dark:focus-visible:outline-white disabled:dark:bg-token-text-quaternary dark:disabled:text-token-main-surface-secondary bg-black text-white dark:bg-white dark:text-black disabled:bg-[#D7D7D7]"><svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-2xl"><path fill-rule="evenodd" clip-rule="evenodd" d="M15.1918 8.90615C15.6381 8.45983 16.3618 8.45983 16.8081 8.90615L21.9509 14.049C22.3972 14.4953 22.3972 15.2189 21.9509 15.6652C21.5046 16.1116 20.781 16.1116 20.3347 15.6652L17.1428 12.4734V22.2857C17.1428 22.9169 16.6311 23.4286 15.9999 23.4286C15.3688 23.4286 14.8571 22.9169 14.8571 22.2857V12.4734L11.6652 15.6652C11.2189 16.1116 10.4953 16.1116 10.049 15.6652C9.60265 15.2189 9.60265 14.4953 10.049 14.049L15.1918 8.90615Z" fill="currentColor"></path></svg></button>
				</div>
			</UserMessage>
			<ChatMessage>
				<p>Odpowiedz na zadanie</p>
				<br>
				<p id="secondQuestionOutput"></p>
				<h1 class="text-[#ECECEC] whitespace-pre-wrap font-bold text-xl mt-8">Zadanie 2</h1>
				<p>Podziel wielomian</p>
				<p is:raw>$$P(x)=x^3-4x^2+6x-3$$</p>
				<p>przez \((x-2)\) za pomocą schematu Hornera.</p>
				<p class="text-semibold">Podpowiedź:</p>
				<ul>
					<li>Ostatnia liczba w schemacie to reszta.</li>
					<li>Jeśli reszta to 0, to \((x-2)\) jest dzielnikiem \(P(x)\).</li>
					<li>Wynik dzielenia to nowy wielomian stopnia o 1 mniejszego.</li>
				</ul>
			</ChatMessage>
			<!--
			<UserMessage>
				<select class="text-[#ECECEC] whitespace-pre-wrap bg-transparent outline-none" id="selectMessage1" onchange="changeMessage('selectMessage1', 'dynamicMessage1');">
					<option class="bg-[#303030] p-2 outline-none active:bg-[#404040] focus:bg-[#404040]">
						Jakie są rodzaje wielomianów?
					</option>
					<option class="bg-[#303030] p-2">
						Jakie zastosowania mają wielomiany?
				</select>
			</UserMessage>
			<ChatMessage>
				<p id="dynamicMessage1"></p>
			</ChatMessage>
			-->
			<UserMessage>
				<p>Daj mi jakieś zadanie, w miare proste</p>
			</UserMessage>
			<ChatMessage>
				<h2 class="text-[#ECECEC] whitespace-pre-wrap font-semibold text-lg mb-6">Oto proste zadanie z wielomianów:</h2>
				<p>Rozłóż na czynniki wielomian $$W(x) = x^3 - 3x^2- 4x + 12.$$</p>
				<p class="text-base mt-4">Powodzenia! Spróbuj rozwiązać je samemu w zeszycie.</p>
			</ChatMessage>	
		</section>
	</main>
	<style>
		p {
			color: #ECECEC;
			white-space: pre-wrap;
		}

		ul {
			color: #ECECEC;
			white-space: pre-wrap;
			list-style-type: disc;
			list-style-position: inside;
		}

		ol {
			color: #ECECEC;
			white-space: pre-wrap;
			list-style-type: decimal;
			list-style-position: inside;
		}

		li {
			margin-top: -0.5rem;
		}

		input {
			color: #ECECEC;
			outline: none;
			border-bottom: 1px solid #ECECEC;
			flex-grow: 1;
			min-width: 10px;
		}
		
	</style>
	<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
	<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
	<script>
		// @ts-nocheck
		// @ts-ignore
		(window as any).checkAnswer = function(inputId: string, correctAnswer: string, outputId: string) {
			console.log('checkAnswer');
			const input = document.getElementById(inputId);
			const output = document.getElementById(outputId);
			if (input && output) {
				const answer = (input as HTMLInputElement).value;
				if (answer.replace(/\s/g,'').toLowerCase() === correctAnswer.replace(/\s/g,'').toLowerCase()) {
					output.textContent = 'Dobrze!';
				} else {
					output.textContent = 'Źle! Spróbuj jeszcze raz.';
				}
			}
		}
	</script>
	<script is:inline>
		function calculateRuffini() {
            // Get user input
            let coeffs = document.getElementById("coefficients").value.split(",").map(Number);
            let c = parseFloat(document.getElementById("divisor").value);
            
            // Ruffini's method calculations
            let n = coeffs.length;
            let row1 = [...coeffs];
            let row2 = Array(n).fill(0);
            let row3 = Array(n).fill(0);
            
            row3[0] = row1[0]; // First coefficient remains the same

            for (let i = 1; i < n; i++) {
                row2[i] = row3[i - 1] * c;
                row3[i] = row1[i] + row2[i];
            }

            // Convert to MathJax format
            let latexTable = `
                \\[
                \\begin{array}{r|${'r'.repeat(n)}}
                ${c} & ${row1.join(" & ")} \\\\ 
                    & ${row2.map(x => x === 0 ? "" : x).join(" & ")} \\\\ 
                \\hline
                    & ${row3.join(" & ")}
                \\end{array}
                \\]
            `;

            // Display result
            document.getElementById("result").innerHTML = latexTable;
            MathJax.typeset();
        }
		// function changeMessage(idOfSelect, idOfMessage) 
		// {
		// 	var selectedOption = document.getElementById(idOfSelect).value;
		// 	var chatMessageElement = document.getElementById(idOfMessage);
		// 	if (selectedOption === 'Jakie są rodzaje wielomianów?') {
		// 		chatMessageElement.textContent = 'Rodzaje wielomianów to: jednomiany, dwumiany, trójmiany i wielomiany wyższych stopni.';
		// 	} else if (selectedOption === 'Jakie zastosowania mają wielomiany?') {
		// 		chatMessageElement.textContent = 'Wielomiany mają zastosowania w wielu dziedzinach matematyki, w tym w algebrze, analizie matematycznej i teorii liczb.';
		// 	}
		// }
    </script>
</Layout>